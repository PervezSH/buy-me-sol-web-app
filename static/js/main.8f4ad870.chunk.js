(this["webpackJsonpbuy-me-sol"]=this["webpackJsonpbuy-me-sol"]||[]).push([[0],{111:function(e,t){},112:function(e,t){},134:function(e,t,n){"use strict";n.r(t);var r=n(13),a=n.n(r),c=n(75),s=n.n(c),o=(n(83),n(3)),i=n(9),u=n(1),l=n.n(u),b=n.p+"static/media/user.bc622e13.svg",d=(n(85),n(25)),m=n(11),p=n(18),j=n(78),f=new RegExp("^[0-9.]+$"),g=Object(m.clusterApiUrl)("devnet"),h="processed";function v(){var e=new m.Connection(g,h);return new p.b(e,window.solana,h)}var x=n(5),O=p.c.SystemProgram,y=Object.values(j._keypair.secretKey),S=new Uint8Array(y),w=p.c.Keypair.fromSecretKey(S),N=new m.PublicKey(d.metadata.address),k=Object(m.clusterApiUrl)("devnet"),A="processed",C=function(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),s=Object(i.a)(c,2),u=s[0],j=s[1],g=Object(r.useState)(""),h=Object(i.a)(g,2),y=h[0],S=h[1],C=Object(r.useState)(""),K=Object(i.a)(C,2),E=K[0],M=K[1],P=Object(r.useState)(""),L=Object(i.a)(P,2),U=L[0],T=L[1],B=Object(r.useState)(!1),F=Object(i.a)(B,2),D=F[0],I=F[1],_=Object(r.useState)(!1),G=Object(i.a)(_,2),J=G[0],z=G[1],R=Object(r.useState)(!1),X=Object(i.a)(R,2),Y=X[0],W=X[1],H=Object(r.useState)(0),Q=Object(i.a)(H,2),V=Q[0],Z=Q[1],$=Object(r.useState)(""),q=Object(i.a)($,2),ee=q[0],te=q[1],ne=Object(r.useState)(0),re=Object(i.a)(ne,2),ae=re[0],ce=re[1],se=Object(r.useState)(""),oe=Object(i.a)(se,2),ie=oe[0],ue=oe[1],le=Object(r.useState)([]),be=Object(i.a)(le,2),de=be[0],me=be[1],pe=Object(r.useState)([]),je=Object(i.a)(pe,2),fe=je[0],ge=je[1],he=Object(r.useState)([]),ve=Object(i.a)(he,2),xe=ve[0],Oe=ve[1],ye=Object(r.useState)(null),Se=Object(i.a)(ye,2),we=Se[0],Ne=Se[1],ke=Object(r.useState)(!1),Ae=Object(i.a)(ke,2),Ce=Ae[0],Ke=Ae[1],Ee=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,!(n=t.solana).isPhantom){e.next=11;break}return console.log("Phantom wallet found!"),e.next=6,n.connect({onlyIfTrusted:!0});case 6:r=e.sent,console.log("Connected with Public Key:",r.publicKey.toString()),a(r.publicKey.toString()),e.next=12;break;case 11:alert("Solana object not found! Get a Phantom Wallet \ud83d\udc7b");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window,!(n=t.solana)){e.next=7;break}return e.next=4,n.connect();case 4:r=e.sent,console.log("Connected with Public Key:",r.publicKey.toString()),a(r.publicKey.toString());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=v(),n=new p.a(d,N,t),console.log("\ud83d\ude80 Starting...."),e.next=6,n.rpc.initialize({accounts:{baseAccount:w.publicKey,user:t.wallet.publicKey,systemProgram:O.programId},signers:[w]});case 6:return console.log("Created a new BaseAccount w/ address:",w.publicKey.toString()),e.next=9,Le();case 9:return e.next=11,Fe();case 11:return e.next=13,Ue();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("Error creating BaseAccount account:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=v(),n=new p.a(d,N,t),e.next=5,n.account.baseAccount.fetch(w.publicKey);case 5:r=e.sent,console.log("Got the account",r),me(r.creatorList),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error in getCreatorList : ",e.t0),me(null);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=v(),n=new p.a(d,N,t),e.next=5,n.account.baseAccount.fetch(w.publicKey);case 5:r=e.sent,Oe(r.messages),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error in getting messages : ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n,r,a,c,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.test(ae.toString())){e.next=3;break}return alert("Not a valid amount \ud83d\ude45"),e.abrupt("return");case 3:if("0"!==ae.toString()){e.next=5;break}return e.abrupt("return");case 5:return console.log(ee),console.log(ae),ue("sendingSol"),e.prev=8,t=new m.Connection(k,A),n=v(),r=new p.a(d,N,n),(a=(new m.Transaction).add(O.transfer({fromPubkey:n.wallet.publicKey,toPubkey:de[V].userAddress,lamports:1e9*ae}))).feePayer=n.wallet.publicKey,console.log("Getting recent blockhash"),e.next=17,t.getRecentBlockhash();case 17:return a.recentBlockhash=e.sent.blockhash,e.next=20,window.solana.signAndSendTransaction(a);case 20:return c=e.sent,s=c.signature,e.next=24,t.confirmTransaction(s);case 24:return o=e.sent,console.log("Transfered \ud83e\udd17. Signature :",s),console.log("Result :",o),alert("\ud83e\udd73 SOL sent successfully!"),ue("sendingMsg"),e.next=31,r.rpc.addMessage(de[V].userAddress,ee,ae.toString(),{accounts:{baseAccount:w.publicKey,user:n.wallet.publicKey,systemProgram:O.programId}});case 31:return te(""),ce(""),alert("\ud83e\udd73 Message sent successfully"),ue(""),e.next=37,Ue();case 37:e.next=43;break;case 39:e.prev=39,e.t0=e.catch(8),ue(""),console.log("Error sending message: ",e.t0);case 43:case"end":return e.stop()}}),e,null,[[8,39]])})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(o.a)(l.a.mark((function e(){var t,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==U.length){e.next=3;break}return console.log("No username given!"),e.abrupt("return");case 3:if(0!==E.length){e.next=6;break}return console.log("No name given!"),e.abrupt("return");case 6:if(t=de.map((function(e){return e.username.toString(),e.username.toString()})),U.toString()!==t.toString()){e.next=10;break}return alert("Username already taken \ud83e\udd15"),e.abrupt("return");case 10:return de.forEach((function(e){n!==e.userAddress.toString()||alert("You can only have one creator account!")})),console.log("Name: ",E," Username: ",U),e.prev=12,r=v(),a=new p.a(d,N,r),e.next=17,a.rpc.createCreator(U,E,{accounts:{baseAccount:w.publicKey,user:r.wallet.publicKey}});case 17:return T(""),M(""),alert("Successfully created creator account \ud83e\udd73 ",E," ",U),e.next=22,Le();case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(12),console.log("Error creating creator account: ",e.t0);case 27:case"end":return e.stop()}}),e,null,[[12,24]])})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=v(),n=new p.a(d,N,t),e.next=5,n.account.baseAccount.fetch(w.publicKey);case 5:r=e.sent,console.log("Got the account",r),ge(r.supporterList),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error in getSupporterList : ",e.t0),ge(null);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==E.length){e.next=3;break}return console.log("No name given!"),e.abrupt("return");case 3:return console.log(E),e.prev=4,t=v(),n=new p.a(d,N,t),e.next=9,n.rpc.createSupporter(E,{accounts:{baseAccount:w.publicKey,user:t.wallet.publicKey}});case 9:return M(""),alert("Successfully created supporter account \ud83e\udd73 ",E),e.next=13,Fe();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log("Error creating supporter account: ",e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(){return e.apply(this,arguments)}}(),Ie=function(){de.forEach((function(e,t){n===e.userAddress.toString()&&(Ne(t),W(!0),Z(t))})),fe.forEach((function(e){n===e.userAddress.toString()&&Ke(!0)}))},_e=function(e){var t,n,r=de.filter((function(t){var n;return(null===t||void 0===t||null===(n=t.userAddress)||void 0===n?void 0:n.toString())===(null===e||void 0===e?void 0:e.toString())}));if(r.length)return null===(t=r[0])||void 0===t?void 0:t.name;var a=fe.filter((function(t){var n;return(null===t||void 0===t||null===(n=t.userAddress)||void 0===n?void 0:n.toString())===(null===e||void 0===e?void 0:e.toString())}));return a.length?null===(n=a[0])||void 0===n?void 0:n.name:void 0};Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("load",e),function(){return window.removeEventListener("load",e)}}),[]),Object(r.useEffect)((function(){n&&(console.log("Fetching creator list..."),Le(),console.log("Fetching supporter list..."),Fe(),console.log("Fetching messages..."),Ue())}),[n]),Object(r.useEffect)((function(){de&&Ie()}),[de]),Object(r.useEffect)((function(){fe&&Ie()}),[fe]);return Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("div",{className:"header-container",children:[Object(x.jsx)("button",{className:"logo-text",onClick:function(){u&&(we&&(Z(we),W(!0)),j(!1)),D&&I(!1),J&&z(!1),Y&&(we?Z(we):W(!1))},children:"Buy Me Sol"}),!n&&Object(x.jsx)("button",{className:"button gradient-button",onClick:Me,children:"Connect Wallet"}),!D&&!J&&n&&Object(x.jsx)("button",{className:"button gradient-button",onClick:function(){j(!0),W(!1)},children:"Explore Creators"})]}),Object(x.jsxs)("div",{className:"body-container",children:[!Y&&!D&&!J&&n&&function(){if(null!==de)return Object(x.jsx)("form",{onSubmit:function(e){e.preventDefault(),console.log(y),n?de&&(S(""),JSON.stringify(de).includes(y)?de.forEach((function(e,t){y===e.username.toString()&&(W(!0),Z(t))})):alert("Username not found \u2639\ufe0f")):Me()},children:Object(x.jsx)("input",{type:"text",placeholder:"Search for creators",value:y,onChange:function(e){return S(e.target.value)}})})}(),Y&&Object(x.jsxs)("div",{className:"main-container",children:[Object(x.jsx)("div",{className:"profile-circle",children:Object(x.jsx)("img",{className:"user-log",src:b,alt:"User"})}),Object(x.jsxs)("div",{className:"name-supporter-conatiner",children:[Object(x.jsxs)("div",{className:"cp-name-container",children:[Object(x.jsx)("div",{className:"bold-text",children:de[V].name.toString()}),Object(x.jsx)("div",{className:"normal-text",children:de[V].username.toString()})]}),Object(x.jsxs)("div",{className:"sub-text",children:["Hello \ud83e\udd17",Object(x.jsx)("br",{}),"Here\u2019s my recent supporters \ud83d\ude0e"]}),Object(x.jsx)("div",{className:"supporter-box",children:xe.map((function(e,t){return de[V].userAddress.toString()===e.creatorAddress.toString()&&Object(x.jsxs)("div",{className:"list-item supporter-item",children:[Object(x.jsx)("img",{className:"user-log",src:b,alt:"User"}),Object(x.jsxs)("div",{className:"amount-message-container",children:[Object(x.jsx)("div",{className:"normal-text",children:null!==_e(e.supporterAddress)?"".concat(_e(e.supporterAddress)," bought ").concat(e.solAmount.toString()," Sol"):"".concat(e.supporterAddress.toString()," bought ").concat(e.solAmount.toString()," Sol")}),Object(x.jsx)("div",{className:"message-container",children:e.message.toString()})]})]},t)}))})]}),de[V].userAddress.toString()!==n&&Object(x.jsxs)("div",{className:"buy-container",children:[Object(x.jsxs)("div",{className:"bold-text",children:["Buy ",de[V].name.toString()," some Sol"]}),Object(x.jsxs)("div",{className:"buy-section",children:[Object(x.jsx)("div",{className:"normal-text",children:"Enter you message"}),Object(x.jsx)("input",{className:"message-box",placeholder:"Say something  nice.....\ud83d\ude0e",value:ee,onChange:function(e){return te(e.target.value)}}),Object(x.jsx)("div",{className:"normal-text",children:"Enter amount"}),Object(x.jsx)("form",{onSubmit:function(e){e.preventDefault(),Te()},children:Object(x.jsx)("input",{className:"message-box amount-box",placeholder:"0",value:ae,onChange:function(e){return ce(e.target.value)}})}),Object(x.jsx)("div",{className:"normal-text tiny-text",children:"You need to approve transection twice"})]}),Object(x.jsxs)("button",{className:"button auth-button",onClick:function(){Te()},children:["sendingSol"===ie?"Sending SOL...":"",""===ie?"Support ".concat(ae," SOL"):"","sendingMsg"===ie?"Sending Msg...":""]})]})]}),Object(x.jsxs)("div",{className:"main-container",children:[!n&&Object(x.jsxs)("h1",{className:"main-text",children:["Give your audience",Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"gradient-text",children:"Solana"})," way",Object(x.jsx)("br",{}),"to say thanks \ud83e\udd17",Object(x.jsx)("p",{className:"sub-text",children:"The fastest, easiest and decentralized way to say thanks."})]}),!u&&!D&&!J&&function(){if(!we)return null===de?Object(x.jsx)("button",{className:"button auth-button",onClick:function(){Pe()},children:"Do One-Time Initialization"}):Object(x.jsxs)("div",{className:"auth-container",children:[Object(x.jsx)("h1",{className:"main-text",children:Ce?"Switch to Creator":"Who are you?"}),Object(x.jsxs)("div",{className:"button-container",children:[Object(x.jsx)("button",{className:"button auth-button",onClick:function(){n||Me(),I(!0)},children:"Creator"}),!Ce&&Object(x.jsx)("button",{className:"button auth-button",onClick:function(){n||Me(),z(!0)},children:"Supporter"})]})]})}(),!Y&&u&&Object(x.jsx)("div",{className:"creator-container",children:de.map((function(e,t){return Object(x.jsxs)("div",{className:"list-item",onClick:function(){console.log("Viewing..."),W(!0),Z(t)},children:[Object(x.jsx)("img",{className:"user-log",src:b,alt:"User"}),Object(x.jsxs)("div",{className:"name-container",children:[Object(x.jsx)("div",{children:e.name.toString()}),Object(x.jsx)("div",{className:"name-container username",children:e.username.toString()})]})]},t)}))}),D&&n&&Object(x.jsxs)("div",{className:"form-container",children:[Object(x.jsxs)("div",{className:"main-text",children:["Create Your Creator Account",Object(x.jsxs)("div",{className:"form-if-title",children:["Name",Object(x.jsx)("input",{className:"form-if",placeholder:"Enter your name",value:E,onChange:function(e){return M(e.target.value)}})]}),Object(x.jsxs)("div",{className:"form-if-title",children:["Username",Object(x.jsx)("form",{onSubmit:function(e){e.preventDefault(),Be()},children:Object(x.jsx)("input",{className:"form-if",placeholder:"Enter your username",value:U,onChange:function(e){return T(e.target.value)}})})]})]}),Object(x.jsx)("button",{className:"button auth-button",onClick:function(){Be()},children:"Submit"})]}),J&&n&&Object(x.jsxs)("div",{className:"form-container",children:[Object(x.jsxs)("div",{className:"main-text",children:["Create Your Creator Account",Object(x.jsxs)("div",{className:"form-if-title",children:["Name",Object(x.jsx)("form",{onSubmit:function(e){e.preventDefault(),De()},children:Object(x.jsx)("input",{className:"form-if",placeholder:"Enter your name",value:E,onChange:function(e){return M(e.target.value)}})})]})]}),Object(x.jsx)("button",{className:"button auth-button",onClick:function(){De()},children:"Submit"})]})]})]})]})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,135)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(C,{})}),document.getElementById("root")),K()},25:function(e){e.exports=JSON.parse('{"version":"0.1.0","name":"buy_me_sol_solana_program","instructions":[{"name":"initialize","accounts":[{"name":"baseAccount","isMut":true,"isSigner":true},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"createCreator","accounts":[{"name":"baseAccount","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":true}],"args":[{"name":"username","type":"string"},{"name":"name","type":"string"}]},{"name":"createSupporter","accounts":[{"name":"baseAccount","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":true}],"args":[{"name":"name","type":"string"}]},{"name":"addMessage","accounts":[{"name":"baseAccount","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"creatorPubkey","type":"publicKey"},{"name":"messageFromUser","type":"string"},{"name":"amount","type":"string"}]}],"accounts":[{"name":"BaseAccount","type":{"kind":"struct","fields":[{"name":"totalCreators","type":"u64"},{"name":"totalSupporters","type":"u64"},{"name":"creatorList","type":{"vec":{"defined":"CreatorStruct"}}},{"name":"supporterList","type":{"vec":{"defined":"SupporterStruct"}}},{"name":"messages","type":{"vec":{"defined":"MessageStruct"}}}]}}],"types":[{"name":"CreatorStruct","type":{"kind":"struct","fields":[{"name":"userAddress","type":"publicKey"},{"name":"username","type":"string"},{"name":"name","type":"string"}]}},{"name":"SupporterStruct","type":{"kind":"struct","fields":[{"name":"userAddress","type":"publicKey"},{"name":"name","type":"string"}]}},{"name":"MessageStruct","type":{"kind":"struct","fields":[{"name":"creatorAddress","type":"publicKey"},{"name":"supporterAddress","type":"publicKey"},{"name":"message","type":"string"},{"name":"solAmount","type":"string"}]}}],"metadata":{"address":"6XxwwEZhFbEfg5d8iiEXhArX15rSwRbtLanQ3EcETKXy"}}')},78:function(e){e.exports=JSON.parse('{"_keypair":{"publicKey":{"0":39,"1":104,"2":143,"3":129,"4":52,"5":138,"6":83,"7":208,"8":82,"9":75,"10":5,"11":159,"12":61,"13":9,"14":242,"15":52,"16":76,"17":159,"18":118,"19":169,"20":242,"21":79,"22":198,"23":51,"24":175,"25":221,"26":60,"27":117,"28":119,"29":17,"30":149,"31":177},"secretKey":{"0":192,"1":111,"2":210,"3":232,"4":52,"5":21,"6":110,"7":174,"8":122,"9":24,"10":233,"11":28,"12":91,"13":107,"14":191,"15":148,"16":95,"17":174,"18":173,"19":58,"20":42,"21":73,"22":173,"23":38,"24":127,"25":167,"26":76,"27":61,"28":130,"29":146,"30":99,"31":225,"32":39,"33":104,"34":143,"35":129,"36":52,"37":138,"38":83,"39":208,"40":82,"41":75,"42":5,"43":159,"44":61,"45":9,"46":242,"47":52,"48":76,"49":159,"50":118,"51":169,"52":242,"53":79,"54":198,"55":51,"56":175,"57":221,"58":60,"59":117,"60":119,"61":17,"62":149,"63":177}}}')},83:function(e,t,n){},85:function(e,t,n){},86:function(e,t){},89:function(e,t){}},[[134,1,2]]]);
//# sourceMappingURL=main.8f4ad870.chunk.js.map